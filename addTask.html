<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AddTask</title>
    <script src="script/contacts.js"></script>
    <script src="./script/script.js"></script>
    <script defer src="./script/addTask.js"></script>
    <script src="./script/storge.js"></script>

    <link rel="shortcut icon" href="img/Logo for Favicon construction.svg" type="image/x-icon">
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/addTask.css">
    <link rel="stylesheet" href="style/contacts.css">
    <link rel="stylesheet" href="templates/header_footer.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body onload="includeHTML(), renderAddTaskContent()">
    <div w3-include-html="templates/sidebar.html"></div>
    <div w3-include-html="templates/header.html"></div>

    <div class="addTaskHeadlineContainer">
        <h1 class="fw-bold">Add Task</h1>
    </div>

    <div id="addTaskPage" class="contentAddTask show-scrollbarTaskWindow">
        <div class="contentPosition">
            <form onsubmit="return false" id="myForm">
                <div class="taskArea">

                    <div class="boxLeft">
                        <div id="titelBox" class="marginBottom16">
                            <span>Titel</span>
                            <input class="click" id="addTitel" required placeholder="Enter a title" type="text">
                        </div>

                        <div class="column">
                            <span>Description</span>
                            <textarea class="click" id="addDescription" required placeholder="Enter a Description"
                                type="text"></textarea>
                        </div>

                        <div>
                            <span>Assigned to</span>
                            <div id="assignTo">
                                <div class="custom-select marginBottom16" id="assignedToInputContainer">
                                </div>
                                <div class="custom-select d-none" id="assignedToContactsInputContainer">
                                </div>
                            </div>
                        </div>
                        <script>
                            // container add d-none by body-click//
                            document.body.addEventListener('click', function () {
                                toggleVisibilityAddTask('assignedToContactsInputContainer', 'assignedToInputContainer')
                            });
                            document.getElementById('assignTo').addEventListener('click', function (event) {
                                event.stopPropagation();
                            });
                        </script>

                    </div>
                    <div class="boxRight">
                        <div>
                            <div>
                                <span>Due date</span>
                                <div>
                                    <input class="click" required placeholder="dd/mm/yyyy" type="text" id="datepicker">
                                </div>
                            </div>

                            <div class="column marginTop16">
                                <span>Prio</span>
                                <div id="prioBox" class="prioButtonContainer">
                                </div>
                            </div>

                            <div id="categorySection" class="column">
                                <span>Category</span>
                                <div class="custom-select marginBottom16" id="categoryAreaV1">
                                    <input onclick="toggleVisibilityAddTask('categoryAreaV1', 'categoryAreaV2')"
                                        class="click" id="categoryInputV1" type="text" readonly
                                        value="Select task category">
                                    <img onclick="toggleVisibilityAddTask('categoryAreaV1', 'categoryAreaV2')"
                                        class="inputAbsolut" src="img/arrow_drop_downaa.svg">
                                </div>

                                <div class="custom-select marginBottom16 d-none" id="categoryAreaV2">
                                    <input onclick="toggleVisibilityAddTask('categoryAreaV2', 'categoryAreaV1')"
                                        class="click" id="categoryInputV2" type="text" readonly
                                        value="Select task category">
                                    <img onclick="toggleVisibilityAddTask('categoryAreaV2', 'categoryAreaV1')"
                                        class="inputAbsolut" src="img/arrow_drop_up.svg">
                                    <div class="selectContactsPositionContainer" id="categoryContainer">
                                        <div class="categoryRenderContainer show-scrollbar"
                                            id="categoryRenderContainer">
                                        </div>
                                        <div id="createCategoryContainer" class="d-none custom-select">
                                        </div>
                                        <div onclick="toggleVisibilityAddTask('', 'createCategoryContainer')"
                                            class="addNewContactBtn blueBtn">
                                            <span>Add new category</span>
                                            <img class="addNewContactBtnIcon" src="img/addTaskCategory.svg">
                                        </div>
                                    </div>
                                </div>
                                <script>// container add d-none by body-click//
                                    document.body.addEventListener('click', function () {
                                        toggleVisibilityAddTask('categoryAreaV2', 'categoryAreaV1')
                                    });

                                    document.getElementById('categorySection').addEventListener('click', function (event) {
                                        event.stopPropagation();
                                    });
                                </script>
                            </div>

                            <div class="column">
                                <span>Subtasks</span>
                                <div class="custom-select">
                                    <input class="click" placeholder="Add new subtask" id="subTaskSelectInput">
                                    <img onclick="addSubTaskToCollection()" class="inputAbsolut"
                                        src="img/plusAddTask.svg">
                                </div>
                                <div class="selectedSubTask show-scrollbar" id="selectedSubTaskContainer">
                                </div>
                                <div id="editContainer" class="d-none custom-select">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="selectBtnArea gap16">
                    <button onclick="clearButton()" class="clearBtn">Clear<img class="clearImg"
                            src="./img/crossAddTask.svg" alt=""></button>
                    <button onclick="createTask()" class="createBtn blueBtn">Create Task<img class="createImg"
                            src="./img/check.svg"></button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>
    <script defer src="./script/pikadayDate.js"></script>
</body>


<section class="addContactBackground horicontalAndVertical d-none index2" id="addContactId" onclick="closePopup()">
    <div class="addContactPopup d-flex" onclick="doNotClose(event)" id="swipeContactPopupId">
        <div class="leftSideAddContactPopup horicontal">
            <img src="./img/join.logo-white.svg">
            <div class="addContactLeftText">
                <spline class="fontSize61"><b id="textChangeToEditContactId">Add contact</b></spline>
                <spline class="fontSize27 textUnderAddContactTitle">Tasks are better with a team!</spline>
                <div class="blueLine">
                </div>
            </div>
        </div>
        <div class="rightSidePopup d-flex">
            <div class="profilePictureArea vertical">
                <img class="circle" src="./img/Group 9.svg">
                <img class="personInCircle" src="./img/person.svg">
            </div>
            <form class="contactInfo column" onsubmit="createContact(); return false;" id="editContactFormId">
                <div class="inputName">
                    <input type="text" placeholder="Name" id="inputNameId" class="fontSize20" required>
                    <div>
                        <img src="./img/person-white.svg">
                    </div>
                </div>
                <div class="inputEmail">
                    <input type="email" placeholder="Email" id="inputEmailId" class="fontSize20" required>
                    <img src="./img/mail.svg">
                </div>
                <div class="inputPhone">
                    <input type="tel" placeholder="Phone" id="inputPhoneId" class="fontSize20" pattern="^[0-9+\/\s]*$"
                        required>
                    <img src=" ./img/call.svg">
                </div>
                <div class="d-flex textHorizontal addContactButtonContainer">
                    <a href="#" class="cancelBtn d-flex" onclick="closePopup()">
                        <spline class="fontSize20" id="editCancelButtonId">Cancel</spline>
                        <img src="./img/iconoir_cancel.svg">
                    </a>
                    <button class="btn btn-dark createContactButton horicontalAndVertical">
                        <spline class="fontSize21">
                            <b id="textChangeToSaveId">Create contact</b>
                        </spline>
                        <img src="./img/check.svg">
                    </button>
                </div>
                <div class="closePopupCross pointer horicontalAndVertical" onclick="closePopup()">
                    <img src="./img/close.svg">
                </div>
            </form>
        </div>
    </div>
</section>

</html>